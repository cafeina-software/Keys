<!DOCTYPE html>
<html lang="en">
 <head>
  <title>Keys - Documentation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
body {
    margin: 0;
    font-family: "DejaVu Sans", sans-serif;
}
header {
    margin: 0;
    padding: 0;
}
ul.navbar {
    position: sticky;
    position: -webkit-sticky;
    top: 0;
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: rgb(183,149,11);
}
li.navbar {
    float: left;
    border-right: 1px solid #efefef;
}
li.navbar a {
    display: block;
    color: white;
    padding: 1rem;
    text-decoration: none;
}
li.navbar a:hover {
    background-color: rgb(212,172,13);
}
#main {
    font-weight: bold;
}
h1 {
    text-align: center;
}
h2 {
    margin-left: 1rem;
    margin-right: 1rem;
    border-bottom-style: dotted;
    border-bottom-color: dashed;
    border-bottom-width: 2px;
    font-size: 2rem;
}
h3 {
    margin-left: 1rem;
    margin-right: 1rem;
    font-size: 1.66rem;
}
h4 {
    margin-left: 1rem;
    margin-right: 1rem;
    font-size: 1.45rem;
    font-style: italic;
}
p {
    padding-bottom: 1rem;
    font-size: 1.4rem;
    text-align: justify;

    margin-left: 1rem;
    margin-right: 1rem;
}
samp {
    background-color: #f5f5f5;
    border: 1px dotted #cfcfcf;
}
footer {
    margin-left: 1rem;
    margin-right: 1rem;
}
img.showcase {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
.warningbox {
    border-style: solid;
    border-width: thin thin thin thick;
    border-color: DarkOrange;
    padding: 1em;
    margin: 0.5rem 10%;
    background-color: Bisque;
}
.warningbox-caption {
    font-weight: bold;
    margin-bottom: 0.2em;
}
.warningbox-text {
    text-align: justify;
}
.errorbox {
    border-style: solid;
    border-width: thin thin thin thick;
    border-color: FireBrick;
    padding: 1em;
    margin: 0.5rem 10%;
    background-color: MistyRose;
}
.errorbox-caption {
    font-weight: bold;
    margin-bottom: 0.2em;
}
.errorbox-text {
    text-align: justify;
}
  </style>
 </head>
 <body>
  <ul class="navbar">
   <li class="navbar"><a href="#" id="main">Keys README</a></li>
   <li class="navbar"><a href="#usage">Usage</a></li>
   <li class="navbar"><a href="#server">Keystore server</a></li>
   <li class="navbar"><a href="#keystore">Keystore management</a></li>
   <li class="navbar"><a href="#keyring">Keys and application access lists</a></li>
  </ul>
  <h1>Keys README</h1>
  <h2 id="usage">Usage</h2>
  <p>This application is intended to be a frontend for the keystore_server,
  to perform a more user friendly operation of keys and keyrings stored there.
  </p>
  <h2 id="server">Keystore server</h2>
  <h3>(Re)start <samp>keystore_server</samp></h3>
  <p>In the case where the <samp>keystore_server</samp> is not running, you can
  make the server to restart by selecting the menu <var>Keys</var> &gt;
  <var>Restart keystore server</var>. This operation is performed immediately.
  The graphic interface will populate itself automatically with the database
  information.
  </p>
  <h3>Stop <samp>keystore_server</samp></h3>
  <p>If for any reason you need to stop the <samp>keystore_server</samp>,
  in addition of being able to do it from the Process Controller you can also
  do it from here with <var>Keys</var> &gt; <var>Stop server</var>. This
  operation is performed immediately. The graphic interface will disable itself
  and no keystore-related operations can be performed until the server is
  restarted.</p>
  <h2 id="keystore">Keystore management</h2>
  <p>Keystore management includes options to create new keyrings and delete
  existing keyrings.</p>
  <h3>Creation of keyrings</h3>
  <p>To create a new keyring in the system keystore, go to the menu
  <var>Keystore</var> &gt; <var>Create keyring…</var> (you can also quickly do
  this by clicking the <var>+</var> button at the bottom of the keyring
  list view). This will open a dialog box:</p>
  <img class="showcase" src="img/en/add_new_keyring.png" width="521" height="305" />
  <p>The dialog box has only the option to write the name of the keyring to be
  created and two buttons to confirm or to cancel the creation. To create a
  keyring, write the desired name and then click Save. If you changed your
  mind, just click Cancel, or if you have already created the keyring, you can
  remove it (see below).</p>
  <div class="warningbox">
  <div class="warningbox-caption">Naming tips</div>
  <div class="warningbox-text">Any name is valid as long as it is not the same
  as <var>Master</var> (this name is already taken by the Master keyring).
  The name must not be empty, and can contain alphanumeric characters or
  symbols such as dashes or underscores.</div>
  </div>
  <h3>Keyring lockdown</h3>
  <p>A keyring can be locked, so it will ask for user consent before open it
  again. This can be performed by selecting a keyring in the keyrings list view,
  and then going to <var>Keyring</var> &gt; <var>Keyring lockdown</var>
  &gt; <var>Lock keyring</var>.</p>
  <p>In order to have the lockdown more effective, the user can activate an
  unlock key that requires the user to disable the lockdown with a password.
  This can be done by going to <var>Keyring</var> &gt; <var>Keyring lockdown</var>
  &gt; <var>Set unlock key…</var>. A dialog box slightly resembling the <var>Add
  new key</var> from below will appear: to add an unlock key type the password
  and press <var>Save</var>, or <var>Cancel</var> to abort the operation without
  changes.</p>
  <p>The unlock key can be removed with the menu <var>Keyring</var> &gt;
  <var>Keyring lockdown</var> &gt; <var>Remove unlock key…</var>.</p>
  <h3>Deletion of keyrings</h3>
  <p>To delete an existing keyring in the system keystore, first select the
  target keyring in the keyring list view and then go to the menu
  <var>Keystore</var> &gt; <var>Delete keyring…</var> (you can also quickly do
  this by clicking the <var>-</var> button at the bottom of the keyring
  list view after selecting a keyring). The interface will ask you to confirm
  the operation or to cancel it. If you proceed with the removal, the keyring
  will be permanently deleted as well as the keys associated with it, and this
  is without any chance of recovery, so be very careful of what you delete.</p>
  <div class="errorbox">
  <div class="errorbox-caption">You cannot delete the <var>Master</var> keyring!</div>
  <div class="errorbox-text">The <var>Master</var> keyring is created by the
  system and it cannot be deleted. If you try to delete it, the Keystore API
  will not allow you to do it.</div>
  </div>
  <h3>Keystore statistics</h3>
  <p>To know more about the statistics of the keystore, go to the menu
  <var>Keystore</var> &gt; <var>Keystore statistics…</var>. This option
  currently offers the number of keyrings inside the keystore and nothing
  else.</p>
  <img class="showcase" src="img/en/keystore_stats.png" width="452" height="161"  />
  <h2 id="keyring">Keyring, keys and application access lists</h2>
  <p>Here you can operate with options related to a specific keyring. To
  select a keyring, in the list view at the left side, choose the entry with
  the target keyring's name, and then perform the desired operation.</p>
  <img class="showcase" src="img/en/Keys_window.png" width="880" height="558.8248" />
  <p>The right side panel has a tabbed view, with the first tab containing the
  list of keys in the keyring, and the second tab the list of applications that
  were allowed to access this keyring.</p>
  <h3>Keys</h3>
  <p>The keys view enumerates all the keys (of any type) contained by this
  keyring.</p>
  <h4>Create keys</h4>
  <p>To create a key, you can either go to the menu <var>Keyring</var> &gt;
  <var>Create key</var>, and in the submenu select the type of key:
  <var>Generic key</var> or <var>Password key</var> (you can also do this by
  clicking the button of Add key in the sidebar of the Keys view).</p>
  <img class="showcase" src="img/en/add_new_key.png" width="460" height="378.37" />
  <p>The Add new key dialog box will appear. There, you can select the type of
  key (generic or password), the identifier, an optional secondary identifier,
  the key data (i.e. the password itself) and the purpose (generic, keyring,
  web, network or volume). For the meaning of any of these concepts, please
  read the <a href="https://www.haiku-os.org/docs/api/Key_8h.html">Haiku API
  documentation</a>. To create a key, it has to have an identifier,
  a key data (i.e. a password), a type and a purpose. Once the required fields
  are filled, click Save to create the key, or Cancel to abort the
  operation.</p>
  <h4>Import and export keys</h4>
  <p>It is possible for a selected key entry to be exported to a file to
  afterwards import it for any reason. To export a key, select an entry and
  click on the <var>Export key</var> sidebar button. It will ask for a file name
  and a location to where the file will be written to.
  </p>
  <p>If for any reason your key or the keyring containing your key was deleted,
  if you exported a copy of it you can import it back to the database. Firstly,
  select the target keyring in the keyring list view, then go to the menu
  <var>Keyring</var> &gt; <var>Import key…</var>. An open dialog will appear,
  where you choose the file containing the key and press <var>Import key</var>
  to import it.</p>
  <p>You can also import in bulk a number of exported keys by dragging and
  dropping the files onto the keyring list view with the target keyring
  selected. There, a dialog will appear to confirm what keys are available
  for importing and you can choose which ones you want.</p>
  <img class="showcase" src="img/en/multiple_importer.png" width="638" height="433" />
  <h4>Delete keys</h4>
  <p>To delete a key, select the target key and click the button of Remove key
  in the sidebar of the Keys view. It will ask for confirmation once. To
  proceed with the removal choose Remove, otherwise choose Cancel.</p>
  <img class="showcase" src="img/en/remove_key.png" width="452" height="115" />
  <h4>Key data viewer</h4>
  <p>To read all the data associated with a key, either double click the key's
  entry or select it and press the View key data button. It will open the
  Data viewer dialog box, and displays the key's identifier, secondary
  identifier (if it was set), type, purpose, creation time (currently not
  supported by the API), owner (currently not supported by the API), and the
  key secret data.</p>
  <img class="showcase" src="img/en/data_viewer.png" width="440" height="603.88" />
  <p>You can quickly copy the key's secret data if you select the target
  key and click the sidebar button Copy key secret.</p>
  <img class="showcase" src="img/en/key_sidebar_copy.png" width="264" height="225" />
  <h3>Whitelisted applications</h3>
  <p>With each keyring, alongside the list of keys there is a list of
  applications that were granted access to the keyring. This is the second
  tab of the right view.</p>
  <p>To revoke an application's access, select the entry in the list view
  and click the button Remove application.</p>
  <img class="showcase" src="img/en/app_sidebar_remove.png" width="264" height="225" />
  <p>To copy the target application's signature, select it and click the button
  Copy signature.</p>
  <p>You can double click the target application list item to open the Tracker's
  information dialog box about the application's binary.</p>
  <h3>Keyring statistics</h3>
  <p>The option <var>Keyring</var> &gt; <var>Keyring statistics…</var> shows
  the statistics of the currently selected keyring. It currently offers the
  status of the keyring (whether it is under lockdown or not),
  the number of keys (and how many of each type), and the number of applications
  with access.</p>
  <img class="showcase" src="img/en/keyring_stats.png" width="311" height="380" />
  <hr />
  <footer id="end">Keys README</footer>
 </body>
</html>

